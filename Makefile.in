LIBS=@LIBS@
CC=@CC@
BINDIR=$(TARGET)@bindir@
MANDIR=$(TARGET)@mandir@
POD=dnstracer.pod

OBJS=dnstracer.o @GETOPT@

dnstracer: $(OBJS)
	$(CC) -o $@ $(OBJS) $(LIBS)

clean:
	rm -f dnstracer $(OBJS)

install: dnstracer
	@INSTALL_DIR@ $(BINDIR)
	@INSTALL_PROGRAM@ dnstracer $(BINDIR)
	test '@MANPAGE@' && @INSTALL_DIR@ $(MANDIR)/man1 || true
	test '@MANPAGE@' && @PODMAN@ $(POD) > $(MANDIR)/man1/@MANPAGE@ || true

spotless: clean
	rm -f @GENERATED_FILES@ @CONFIGURE_FILES@

dnstracer.o: dnstracer.c config.h dnstracer_broken.h
